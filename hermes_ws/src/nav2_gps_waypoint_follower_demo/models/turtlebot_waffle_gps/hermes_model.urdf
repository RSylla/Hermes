<?xml version="1.0"?>
<robot name="hermes">

    <material name="grey">
        <color rgba="0.7 0.7 0.7 1"/>
    </material>

    <material name="ld19 color">
        <color rgba="0.2313725490196078538 0.38039215686274507888 0.7058823529411765163 1.0"/>
    </material>

    <link name="base_footprint">
        <inertial>
            <mass value="1.0"/>
            <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
        </inertial>
    </link>
    
    <link name="base_link">
        <inertial>
            <mass value="5.0"/>
            <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
        </inertial>
        <visual>
            <origin xyz="0.50575420423148409466 -0.0071774303769972201683 0.60255675209035008955" rpy="7.940934590483602961e-23 -1.4644253098708242934e-15 1.55431223447518563e-15" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/kere.stl"/>
            </geometry>
            <material name="kere_material">
                <color rgba="0.61568627450980395466 0.81176470588235294379 0.92941176470588238168 1.0"/>
            </material>
        </visual>
        <collision>
        	<origin xyz="0.50575420423148409466 -0.0071774303769972201683 0.60255675209035008955" rpy="7.940934590483602961e-23 -1.4644253098708242934e-15 1.55431223447518563e-15" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/kere.stl"/>
            </geometry>
        </collision>
    </link>

    <link name="ld19">
        <inertial>
            <mass value="2.0"/>
            <inertia ixx="0.5" ixy="0.0" ixz="0.0" iyy="0.5" iyz="0.0" izz="0.5"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/ld19.stl"/>
            </geometry>
            <material name="ld19_material">
                <color rgba="0.2313725490196078538 0.38039215686274507888 0.7058823529411765163 1.0"/>
            </material>
        </visual>
    </link>

    <joint name="base_lidar_joint" type="fixed">
        <parent link="base_link"/>
        <child link="ld19"/>
        <origin xyz="1.039666598485702087 -0.0073333696901138160917 0.99755675209036465123" rpy="1.4644253098708029941e-15 7.9409344339936499792e-23 -1.5707963267948970021" />

    </joint>

    <link name="rear_right_wheel">
        <inertial>
            <mass value="1.5"/>
            <inertia ixx="0.3" ixy="0.0" ixz="0.0" iyy="0.3" iyz="0.0" izz="0.3"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 -0 0" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/rehv.stl"/>
            </geometry>
            <material name="rehv1_material">
                <color rgba="0.61568627450980395466 0.81176470588235294379 0.92941176470588238168 1.0"/>
            </material>
        </visual>
        <collision>
        	<origin xyz="0 0 0" rpy="0 -0 0" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/rehv.stl"/>
            </geometry>
        </collision>
    </link>

    <joint name="base_rear_right_wheel_joint" type="continuous">
        <parent link="base_link"/>
        <child link="rear_right_wheel"/>
        <origin xyz="0.066534204231474658453 -0.21467743037699693609 0.61255675209034976536" rpy="3.3611923249190478047e-30 -1.8665624601511304194e-15 5.6898930012037971076e-16" />
        <axis xyz="0 1 0"/>
    </joint>

    <link name="front_left_wheel">
        <inertial>
            <mass value="1.5"/>
            <inertia ixx="0.3" ixy="0.0" ixz="0.0" iyy="0.3" iyz="0.0" izz="0.3"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 1.58" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/rehv.stl"/>
            </geometry>
            <material name="rehv1_material">
                <color rgba="0.61568627450980395466 0.81176470588235294379 0.92941176470588238168 1.0"/>
            </material>
        </visual>
        <collision>
        	<origin xyz="0 0 0" rpy="0 0 1.58" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/rehv.stl"/>
            </geometry>
        </collision>
    </link>

    <joint name="base_front_left_wheel_joint" type="continuous">
        <parent link="liigend"/>
        <child link="front_left_wheel"/>
        <origin xyz="-0.30232256962300351688 0 0" rpy="0 0 0" />
        <axis xyz="1 0 0" />
    </joint>

    <link name="rear_left_wheel">
        <inertial>
            <mass value="1.5"/>
            <inertia ixx="0.3" ixy="0.0" ixz="0.0" iyy="0.3" iyz="0.0" izz="0.3"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 -0 0" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/rehv.stl"/>
            </geometry>
            <material name="rehv1_material">
                <color rgba="0.61568627450980395466 0.81176470588235294379 0.92941176470588238168 1.0"/>
            </material>
        </visual>
        <collision>
        	<origin xyz="0 0 0" rpy="0 -0 0" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/rehv.stl"/>
            </geometry>
        </collision>
    </link>

    <joint name="base_rear_left_wheel_joint" type="continuous">
        <parent link="base_link"/>
        <child link="rear_left_wheel"/>
        <origin xyz="0.06653420423147499152 0.25032256962300086789 0.61255675209034965434" rpy="3.141592653589793116 1.8665624601511276584e-15 -3.1415926535897926719" />
        <axis xyz="0 1 0" />
    </joint>
    
    <link name="front_right_wheel">
        <inertial>
            <mass value="1.5"/>
            <inertia ixx="0.3" ixy="0.0" ixz="0.0" iyy="0.3" iyz="0.0" izz="0.3"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 1.583" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/rehv.stl"/>
            </geometry>
            <material name="rehv1_material">
                <color rgba="0.61568627450980395466 0.81176470588235294379 0.92941176470588238168 1.0"/>
            </material>
        </visual>
        <collision>
        	<origin xyz="0 0 0" rpy="0 0 1.583" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/rehv.stl"/>
            </geometry>
        </collision>
    </link>

    <joint name="base_front_right_wheel_joint" type="continuous">
        <parent link="liigend"/>
        <child link="front_right_wheel"/>
        <origin xyz="0.2523774303769966985 0 0" rpy="0 0 0" />
        <axis xyz="1 0 0" />
    </joint>

    <link name="liigend">
        <inertial>
            <mass value="3.0"/>
            <inertia ixx="0.7" ixy="0.0" ixz="0.0" iyy="0.7" iyz="0.0" izz="0.7"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 -0 0" />
            <geometry>
                <mesh filename="/home/aleksmalm/Hermes/hermes_ws/src/hermes_urdf/urdf/liigend.stl"/>
            </geometry>
            <material name="liigend_material">
                <color rgba="0.61568627450980395466 0.81176470588235294379 0.92941176470588238168 1.0"/>
            </material>
        </visual>
    </link>

    <joint name="liigend_to_kere_joint" type="continuous">
        <parent link="base_link"/>
        <child link="liigend"/>
        <origin xyz="0.9483341292917655263 -0.0071774303769965852595 0.6075567520903586427" rpy="2.2686993105948162011e-15 -6.1350116673315255536e-22 -1.5707963267948390484" />
        <axis xyz="0 0 1"/>
        <limit lower="-0.7854" upper="0.7854" effort="100000" velocity="100"/>
    </joint>
    
    <joint name="base_joint" type="fixed">
        <parent link="base_footprint"/>
        <child link="base_link"/>
        <origin xyz="0 0 -0.45" rpy="0 0 0" />
        
    </joint>
   
    <gazebo>
        <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">
		
		
	    	
		
            <!-- Wheel Information -->
            <left_joint>base_front_right_wheel_joint</left_joint>
            <right_joint>base_front_left_wheel_joint</right_joint>
            <wheel_separation>0.54</wheel_separation>
            <wheel_diameter>0.254</wheel_diameter>


            <!-- Limits -->
            <max_wheel_torque>30</max_wheel_torque>
            <max_wheel_acceleration>5.0</max_wheel_acceleration>
	    <command_topic>cmd_vel</command_topic>
            
            <!-- Output -->
            <odometry_frame>odom</odometry_frame>
            <robot_base_frame>base_joint</robot_base_frame>
	    <robot_base_frame>base_footprint</robot_base_frame>
            <publish_odom>true</publish_odom>
            <publish_odom_tf>true</publish_odom_tf>
            <publish_wheel_tf>true</publish_wheel_tf>
	    <legacyMode>false</legacyMode>

        </plugin>
    </gazebo>
    
    <link name="gps_link">
      <!-- Some weird bug occurs if this joint gets the default inertia -->
        <inertial>
          <pose>-0.052 0.1 0.111 0.1 0.1 0.1</pose>
          <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
          <mass>0.125</mass>
        </inertial>
        <sensor name="tb3_gps" type="gps">
          <always_on>true</always_on>
          <update_rate>1</update_rate>
          <pose>0 0 0 0 0 0</pose>
          <gps>
            <position_sensing>
              <horizontal>
                <noise type="gaussian">
                  <mean>0.0</mean>
                  <stddev>0.01</stddev>
                </noise>
              </horizontal>
              <vertical>
                <noise type="gaussian">
                  <mean>0.0</mean>
                  <stddev>0.01</stddev>
                </noise>
              </vertical>
            </position_sensing>
          </gps>
          <plugin name="my_gps_plugin" filename="libgazebo_ros_gps_sensor.so">
            <ros>
              <remapping>~/out:=/gps/fix</remapping>
            </ros>
          </plugin>
        </sensor>
      </link>

    
    

    <joint name="base_gps_joint" type="fixed">
        <parent link="base_link"/>
        <child link="gps_link"/>
        <origin xyz="0.838666598485702087 -0.0073333696901138160917 0.99755675209036465123" rpy="0 0 0"/>
    </joint>
    
</robot>



